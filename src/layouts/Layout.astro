---
import FormPopup from "../lib/FormPopup.astro";
import enTranslations from "../locales/en.json";
// Get translations from props or use English as default
const { t = enTranslations } = Astro.props;
---
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="generator" content={Astro.generator} />
    <title>Dplasticsurgery</title>
    <meta name="robots" content="noindex, nofollow" />

    <style>
      body {
        font-family: "Manrope", sans-serif;
        background: #f5f5f7;
      }
      /* global.css veya styles.css dosyanızda */
      @font-face {
        font-family: "Manrope";
        src:
          url("/fonts/Manrope-Regular.woff2") format("woff2"),
          url("/fonts/Manrope-Regular.woff") format("woff");
        font-weight: 400;
        font-style: normal;
        font-display: swap;
      }

      @font-face {
        font-family: "Manrope";
        src:
          url("/fonts/Manrope-Medium.woff2") format("woff2"),
          url("/fonts/Manrope-Medium.woff") format("woff");
        font-weight: 500;
        font-style: normal;
        font-display: swap;
      }

      @font-face {
        font-family: "Manrope";
        src:
          url("/fonts/Manrope-Bold.woff2") format("woff2"),
          url("/fonts/Manrope-Bold.woff") format("woff");
        font-weight: 700;
        font-style: normal;
        font-display: swap;
      }

      /* Diğer font ağırlıklarını da benzer şekilde ekleyebilirsiniz */

      body {
        font-family: "Manrope", sans-serif;
      }
    </style>
    <script src="/src/lib/event.js"></script>
    <!-- Google Tag Manager -->
<script>
  (function(w,d,s,l,i){w[l]=w[l]||[];
    w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});
    var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';
    j.async=true;
    j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
    f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-WC8SNDSF');
</script>
<!-- End Google Tag Manager -->
    <!-- End Google Tag Manager -->
  </head>
  <!-- Google Tag Manager -->

  <body>
    <noscript>
<iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WC8SNDSF"
          height="0" width="0" style="display:none;visibility:hidden"></iframe>
</noscript>
    <slot />

    <!-- Form Popup Component - Appears at page level -->
    <FormPopup t={t} />

    <script>
      // Sayfa yüklendiğinde başlangıç zamanını ayarla
      document.addEventListener("DOMContentLoaded", () => {
        const startTime = Date.now();
        document.body.setAttribute("data-starttime", String(startTime));

        // Scrolling izleme
        let maxScrollPercentage = 0;
        let scrolltotal = 0;
        document.body.setAttribute("data-scroll", String(scrolltotal));

        window.addEventListener("scroll", function () {
          const scrollTop =
            window.scrollY || document.documentElement.scrollTop;
          const windowHeight = window.innerHeight;
          const fullHeight = document.documentElement.scrollHeight;

          const scrollPercentage =
            (scrollTop / (fullHeight - windowHeight)) * 100;

          if (scrollPercentage > maxScrollPercentage) {
            maxScrollPercentage = scrollPercentage;
          }
          scrolltotal = maxScrollPercentage;

          document.body.setAttribute("data-scroll", scrolltotal.toFixed(2));
        });
      });
    </script>
  </body>
</html>

<style>
  html,
  body {
    margin: 0;
    width: 100%;
    height: 100%;
  }
</style>
